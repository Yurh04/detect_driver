# 三人团队分工方案

## 一、分工原则

### 1.1 核心原则
- ✅ **工作量均衡** - 每人承担的任务量大致相当
- ✅ **职责清晰** - 避免重复工作和责任模糊
- ✅ **并行开发** - 最大化并行任务，提高效率
- ✅ **互相配合** - 定期同步进度，协作解决问题

### 1.2 技能要求
- **Python编程** - 基础要求，三人都需要
- **PyTorch/深度学习** - 基础要求，三人都需要
- **数据处理经验** - 成员A重点
- **模型训练经验** - 成员B重点
- **工程部署经验** - 成员C重点

---

## 二、三人分工方案

### 🔵 成员A：数据工程师
**核心职责**：数据分析、数据增强、数据质量保证

#### 主要任务

**阶段一：数据准备与分析（Day 1-2）**
- [ ] 下载并验证数据集完整性
- [ ] 编写数据分析脚本
  - 统计三类行为的样本分布
  - 分析边界框尺寸分布（特别是小目标）
  - 统计图像质量（分辨率、模糊度）
  - 检查标注质量
- [ ] 生成数据分析报告（图表+文字）
- [ ] 识别数据问题（类别不平衡、异常样本等）

**阶段二：数据增强策略（Day 3-5）**
- [ ] 实现基础数据增强
  - 调整YOLOv8默认增强参数
  - 测试不同参数组合
- [ ] 实现驾驶场景特定增强
  - 光照变化模拟（白天/夜晚/隧道）
  - 运动模糊增强
  - 小目标尺度增强
  - 遮挡模拟
- [ ] 数据增强消融实验
  - 对比不同增强策略的效果
  - 记录每种增强的mAP影响

**阶段三：数据优化与支持（Day 6-10）**
- [ ] 根据训练反馈调整数据增强
- [ ] 困难样本分析与挖掘
- [ ] 支持成员B的训练实验
- [ ] 数据可视化（预测结果展示）

**阶段四：结果整理（Day 11-12）**
- [ ] 整理数据分析结果
- [ ] 制作数据分布可视化图表
- [ ] 编写数据部分的实验报告

#### 交付物
- ✅ 数据分析报告（包含可视化图表）
- ✅ 数据增强实验结果对比
- ✅ `data_analysis.py` 脚本
- ✅ `augmentation_test.py` 脚本
- ✅ 预测结果可视化图片

#### 技能提升
- 数据分析与可视化
- 图像增强技术
- 目标检测数据特点理解

---

### 🟢 成员B：算法工程师
**核心职责**：模型训练、超参数调优、训练策略优化

#### 主要任务

**阶段一：环境配置与Baseline（Day 1-2）**
- [ ] 搭建训练环境
  - 安装PyTorch、Ultralytics
  - 配置GPU环境
  - 编写环境验证脚本
- [ ] Baseline训练
  - 使用默认参数训练YOLOv8n
  - 复现参考结果（mAP≈0.65）
  - 记录训练日志和结果

**阶段二：训练策略优化（Day 3-6）**
- [ ] 两阶段微调实验
  - Stage1: 冻结Backbone训练（5 epochs）
  - Stage2: 全模型微调（145 epochs）
  - 对比一步到位训练的效果
- [ ] 优化器对比实验
  - SGD vs Adam vs AdamW
  - 记录收敛速度和最终精度
- [ ] 学习率策略实验
  - 固定学习率 vs Cosine退火
  - 不同Warm-up轮数
  - 不同初始学习率

**阶段三：超参数调优（Day 7-9）**
- [ ] 批量大小调整（8/16/32）
- [ ] 图像尺寸实验（640/800）
- [ ] 多尺度训练测试
- [ ] 正则化参数调整
  - weight_decay
  - dropout（如需要）
- [ ] 训练轮数测试（150/200/250 epochs）

**阶段四：高级优化（Day 10）**
- [ ] 配合成员C测试注意力机制
- [ ] 配合成员C测试模型集成
- [ ] 超参数搜索（可选，使用Optuna）

**阶段五：最优模型训练（Day 11）**
- [ ] 使用最优配置重新训练
- [ ] 验证集和测试集完整评估
- [ ] 保存最佳模型权重

**阶段六：结果整理（Day 12）**
- [ ] 整理所有实验记录
- [ ] 绘制训练曲线对比图
- [ ] 编写训练部分的实验报告

#### 交付物
- ✅ 训练脚本（baseline + optimized）
- ✅ 实验记录表格（Excel/CSV）
- ✅ 训练曲线图（mAP、loss等）
- ✅ 最佳模型权重文件（best.pt）
- ✅ 超参数对比分析报告

#### 技能提升
- 深度学习训练技巧
- 超参数调优经验
- 实验设计与对比分析

---

### 🟡 成员C：工程工程师
**核心职责**：损失函数优化、模型结构改进、部署与应用

#### 主要任务

**阶段一：环境准备与代码框架（Day 1-2）**
- [ ] 搭建开发环境
- [ ] 熟悉YOLOv8代码结构
- [ ] 编写评估脚本
  - 模型评估（val.py）
  - 性能分析（每类AP、混淆矩阵）
  - 推理速度测试

**阶段二：损失函数优化（Day 3-5）**
- [ ] 分析baseline损失函数
- [ ] 实现损失权重调整
  - box:cls:dfl 权重搜索
  - 针对小目标的损失加权
- [ ] 类别不平衡处理
  - 根据样本数动态调整权重
  - 测试Focal Loss效果
- [ ] 损失函数消融实验

**阶段三：模型结构优化（Day 6-8）**
- [ ] 研究YOLOv8架构
- [ ] 实现注意力机制（可选）
  - CBAM模块
  - SE模块
  - 集成到YOLOv8
- [ ] 测试不同模型大小
  - YOLOv8n vs YOLOv8s
  - 速度-精度权衡分析
- [ ] 特征金字塔优化（可选）

**阶段四：后处理优化（Day 9）**
- [ ] NMS参数调优
  - IoU阈值搜索
  - 置信度阈值搜索
- [ ] 测试改进的NMS算法
  - Soft-NMS
  - DIoU-NMS
- [ ] 模型集成方案
  - 训练3个不同初始化的模型
  - 实现加权融合
  - 测试集成效果

**阶段五：模型部署（Day 10-11）**
- [ ] 模型导出
  - ONNX格式
  - TensorRT格式（如有GPU）
  - 测试导出模型精度
- [ ] 推理优化
  - 批量推理
  - 模型量化（FP16/INT8）
- [ ] 开发应用demo
  - 图像检测接口
  - 视频检测接口
  - 实时摄像头检测（可选）

**阶段六：部署测试与文档（Day 12）**
- [ ] 推理速度测试（FPS）
- [ ] 不同平台测试（CPU/GPU）
- [ ] 编写使用文档
- [ ] 编写部署部分的实验报告

#### 交付物
- ✅ 评估脚本（evaluate.py）
- ✅ 损失函数优化代码
- ✅ 注意力机制实现（可选）
- ✅ 模型集成代码（ensemble.py）
- ✅ 推理脚本（inference.py）
- ✅ ONNX/TensorRT导出模型
- ✅ Demo应用程序
- ✅ 使用文档

#### 技能提升
- 损失函数设计
- 模型架构改进
- 模型部署与优化
- 工程化能力

---

## 三、协作机制

### 3.1 时间节点同步

| 时间 | 同步会议 | 内容 |
|------|---------|------|
| **Day 1 上午** | 启动会 | 明确分工、搭建环境、确定接口 |
| **Day 2 晚上** | 第一次同步 | A汇报数据分析结果，B汇报baseline结果，C汇报框架搭建 |
| **Day 5 晚上** | 第二次同步 | A汇报增强策略，B汇报初步优化结果，C汇报损失优化方案 |
| **Day 8 晚上** | 第三次同步 | 讨论实验进展，调整后续计划 |
| **Day 10 晚上** | 第四次同步 | 确定最优方案，分配最后任务 |
| **Day 12 全天** | 总结会 | 整合成果，撰写报告，准备汇报 |

### 3.2 任务依赖关系

```
Day 1-2: 并行准备
├─ A: 数据分析
├─ B: Baseline训练  ← 依赖A的data.yaml
└─ C: 框架搭建

Day 3-5: 第一轮优化（并行）
├─ A: 数据增强实验
├─ B: 训练策略优化  ← 可选择性使用A的增强
└─ C: 损失函数优化  ← 提供给B测试

Day 6-9: 第二轮优化（协作）
├─ A: 支持B的数据需求
├─ B: 超参数调优  ← 使用A的增强 + C的损失
└─ C: 模型结构优化  ← 提供给B训练

Day 10-11: 最终优化与部署
├─ A: 结果可视化
├─ B: 最优模型训练  ← 集成A+C的所有优化
└─ C: 模型集成与部署  ← 使用B的多个模型

Day 12: 整合汇报
└─ A+B+C: 共同完成实验报告和汇报材料
```

### 3.3 代码协作规范

**Git分支管理**
```
main (主分支，稳定版本)
├── dev-data (成员A的开发分支)
├── dev-train (成员B的开发分支)
└── dev-deploy (成员C的开发分支)
```

**代码提交规范**
```bash
# 成员A
git commit -m "feat: add data augmentation for night scene"
git commit -m "fix: correct bbox size statistics"

# 成员B  
git commit -m "feat: implement two-stage fine-tuning"
git commit -m "exp: SGD vs AdamW comparison"

# 成员C
git commit -m "feat: add CBAM attention module"
git commit -m "deploy: export model to ONNX format"
```

**文件组织结构**
```
detect_driver/
├── data/
│   ├── datasets_3/          # 数据集（A负责）
│   ├── data.yaml            # 配置文件（A创建）
│   └── analysis/            # 分析结果（A维护）
├── scripts/
│   ├── data_analysis.py     # A编写
│   ├── train_baseline.py    # B编写
│   ├── train_optimized.py   # B编写
│   ├── evaluate.py          # C编写
│   └── inference.py         # C编写
├── models/
│   ├── attention.py         # C编写（可选）
│   └── ensemble.py          # C编写
├── runs/
│   ├── detect/              # B的训练结果
│   └── deploy/              # C的部署结果
├── docs/
│   ├── 数据分析报告.md       # A撰写
│   ├── 训练实验报告.md       # B撰写
│   └── 部署文档.md          # C撰写
└── README.md               # 三人共同维护
```

### 3.4 沟通工具

**即时沟通**: 微信群/钉钉群  
**文档协作**: 腾讯文档/飞书文档  
**代码管理**: GitHub/Gitee  
**实验记录**: Excel/Google Sheets  
**文件共享**: 百度云/OneDrive

---

## 四、实验分配矩阵

| 实验编号 | 实验名称 | 主责 | 协助 | 预期时间 |
|---------|---------|------|------|---------|
| **Exp-1** | Baseline训练 | B | A提供数据 | Day 2 |
| **Exp-2** | 数据增强对比 | A | B配合训练 | Day 3-4 |
| **Exp-3** | 优化器对比 | B | - | Day 4-5 |
| **Exp-4** | 学习率策略 | B | - | Day 5-6 |
| **Exp-5** | 损失函数优化 | C | B配合训练 | Day 5-6 |
| **Exp-6** | 两阶段微调 | B | C提供损失 | Day 6-7 |
| **Exp-7** | 多尺度训练 | B | A提供增强 | Day 7-8 |
| **Exp-8** | 注意力机制(可选) | C | B配合训练 | Day 8-9 |
| **Exp-9** | 模型集成 | C | B提供模型 | Day 10 |
| **Exp-10** | 最优配置训练 | B | A+C支持 | Day 11 |

---

## 五、风险管理

### 5.1 潜在风险及应对

| 风险 | 负责人 | 应对措施 |
|-----|--------|---------|
| 数据质量问题 | A | 提前检查，及时清洗，备用增强策略 |
| 训练时间过长 | B | 使用云GPU，减少实验组数，并行训练 |
| 显存不足 | B | 减小batch size，使用梯度累积 |
| 代码冲突 | 全员 | 遵守分支规范，及时合并，代码review |
| 进度延误 | 全员 | 每日更新进度，及时调整任务优先级 |
| 结果不达预期 | B+C | 备选方案：更大模型、模型集成 |

### 5.2 备用方案

**Plan A（正常）**: YOLOv8n + 完整优化  
**Plan B（效果不佳）**: YOLOv8s + 关键优化  
**Plan C（时间紧张）**: YOLOv8n + 核心优化（数据+训练策略）

---

## 六、考核与贡献

### 6.1 工作量评估

| 成员 | 任务类型 | 代码量 | 实验量 | 文档量 | 综合贡献 |
|-----|---------|--------|--------|--------|---------|
| **A** | 数据工程 | 中 | 中 | 中 | 33% |
| **B** | 算法训练 | 中 | 高 | 高 | 34% |
| **C** | 模型部署 | 高 | 中 | 中 | 33% |

### 6.2 个人贡献点

**成员A**:
- ✅ 数据分析与可视化
- ✅ 数据增强策略设计与实验
- ✅ 数据部分实验报告

**成员B**:
- ✅ Baseline建立
- ✅ 训练策略与超参数优化
- ✅ 核心实验执行
- ✅ 训练部分实验报告

**成员C**:
- ✅ 损失函数优化
- ✅ 模型结构改进（可选）
- ✅ 模型部署与应用开发
- ✅ 部署文档

### 6.3 共同贡献

- ✅ 最终实验报告整合
- ✅ 汇报PPT制作
- ✅ 项目代码仓库维护
- ✅ README和使用文档

---

## 七、每日工作计划（示例）

### 成员A - Day 3（数据增强）

**上午（9:00-12:00）**
- [ ] 实现基础数据增强调参
- [ ] 实现光照变化增强
- [ ] 测试增强效果（可视化）

**下午（14:00-17:00）**
- [ ] 实现运动模糊增强
- [ ] 实现小目标尺度增强
- [ ] 编写增强测试脚本

**晚上（19:00-21:00）**
- [ ] 运行3组对比实验
- [ ] 记录实验结果
- [ ] 同步给成员B

### 成员B - Day 6（超参数调优）

**上午（9:00-12:00）**
- [ ] 启动优化器对比实验（3组并行）
- [ ] 监控训练进度
- [ ] 记录初步结果

**下午（14:00-17:00）**
- [ ] 学习率策略实验（2组）
- [ ] 分析训练曲线
- [ ] 确定最优学习率

**晚上（19:00-21:00）**
- [ ] 整理实验数据
- [ ] 更新实验记录表
- [ ] 向团队同步进度

### 成员C - Day 10（模型部署）

**上午（9:00-12:00）**
- [ ] 导出最佳模型为ONNX
- [ ] 验证ONNX模型精度
- [ ] 测试推理速度

**下午（14:00-17:00）**
- [ ] 实现批量推理
- [ ] 模型量化（FP16）
- [ ] 速度对比测试

**晚上（19:00-21:00）**
- [ ] 开发简单的demo界面
- [ ] 编写使用文档
- [ ] 准备部署演示

---

## 八、成功标准

### 8.1 技术指标
- ✅ mAP@0.5:0.95 ≥ 0.68（目标）或 ≥ 0.70（期望）
- ✅ 推理速度 ≥ 30 FPS
- ✅ 完成至少5组有效对比实验
- ✅ 代码可复现，文档完整

### 8.2 团队协作
- ✅ 按时完成各阶段任务
- ✅ 每次同步会议全员参加
- ✅ 代码提交规范，无冲突
- ✅ 沟通顺畅，问题及时解决

### 8.3 最终交付
- ✅ 训练好的最佳模型
- ✅ 完整的代码仓库
- ✅ 详细的实验报告
- ✅ 汇报PPT和演示demo
- ✅ 使用文档

---

## 附录：快速启动指南

### Day 1 上午启动会议议程

**9:00-9:30 项目介绍**
- 明确项目目标和评价标准
- 介绍技术方案和整体架构

**9:30-10:00 分工确认**
- 三人根据特长选择角色
- 明确各自的职责和交付物

**10:00-10:30 环境配置**
- 统一开发环境
- 配置Git仓库
- 建立沟通渠道

**10:30-11:00 接口定义**
- 确定data.yaml格式
- 确定训练脚本接口
- 确定评估脚本接口

**11:00-11:30 时间规划**
- 确定同步会议时间
- 明确关键里程碑
- 讨论潜在风险

**11:30-12:00 立即开工**
- A: 下载数据集，开始分析
- B: 搭建训练环境，熟悉YOLOv8
- C: 搭建开发环境，研究代码结构

---

**祝团队协作顺利，项目圆满成功！** 🎉

